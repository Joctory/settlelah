<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <title>SettleLah! - Bill Details</title>
    <meta name="description" content="Bill Details for SettleLah!" />
    <link rel="icon" href="/icons/favicon.png" />
    <link rel="stylesheet" type="text/css" href="/result.min.css" />
  </head>
  <body>
    <!-- Loading State -->
    <div id="loading" class="loading-container">
      <div class="loading-spinner"></div>
      <p class="loading-text">Loading your settle details...</p>
    </div>

    <!-- Error Message -->
    <div id="error-container" class="error-container">
      <div class="error-icon">
        <img src="/assets/error-icon.svg" alt="Error" onerror="this.src='/assets/close-circle.svg'" />
      </div>
      <p id="error-message" class="error-message">Error loading data</p>
      <button id="error-retry-btn" class="action-button secondary-button">Try Again</button>
    </div>

    <!-- Share Button -->
    <button id="share-bill-btn" class="share-bill-button" title="Share this bill">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M18 8C19.6569 8 21 6.65685 21 5C21 3.34315 19.6569 2 18 2C16.3431 2 15 3.34315 15 5C15 5.18885 15.0116 5.37491 15.0343 5.55681L9.86424 8.72943C9.34051 8.26697 8.70138 8 8 8C6.34315 8 5 9.34315 5 11C5 12.6569 6.34315 14 8 14C8.70138 14 9.34051 13.733 9.86424 13.2706L15.0343 16.4432C15.0116 16.6251 15 16.8111 15 17C15 18.6569 16.3431 20 18 20C19.6569 20 21 18.6569 21 17C21 15.3431 19.6569 14 18 14C17.2986 14 16.6595 14.267 16.1358 14.7294L10.9657 11.5568C10.9884 11.3749 11 11.1889 11 11C11 10.8111 10.9884 10.6251 10.9657 10.4432L16.1358 7.27057C16.6595 7.73303 17.2986 8 18 8Z"
          fill="currentColor"
        />
      </svg>
    </button>

    <div id="bill-content" class="result-container bill-content">
      <!-- Success Screen -->
      <div id="successScreen" class="success-screen">
        <img class="terminal-img" src="/assets/terminal.svg" alt="terminal" />
        <img class="terminal-img-top" src="/assets/terminaltop.svg" alt="terminal" />
        <div id="successReceipt" class="success-details">
          <div class="success-icon-container">
            <div class="success-icon">
              <div class="checkmark">
                <img class="checkmark-img" src="/assets/tick-circle.svg" alt="loading" />
              </div>
            </div>
          </div>
          <h1 class="success-title">Settle Success!</h1>
          <p class="success-subtitle">Thank you for using SettleLah!</p>
          <p class="success-subtitle">TEL: +88 1314 5200</p>
          <p class="success-subtitle">GST REG NO: 131488888</p>

          <div class="success-details-liner">
            <div class="notch-left"></div>
            <div class="success-details-liner-line"></div>
            <div class="notch-right"></div>
          </div>
          <div class="detail-row-container">
            <div class="detail-row">
              <span class="detail-label">Settle Matter</span>
              <span class="detail-value successSettleMatter"></span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Total Settle Item</span>
              <span class="detail-value successItemCount"></span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Subtotal</span>
              <span class="detail-value successSubtotal"></span>
            </div>
            <div class="detail-row serviceChargeRow" style="display: none">
              <span class="detail-label">Service Charge (<span class="serviceChargeRate"></span>)</span>
              <span class="detail-value successServiceCharge"></span>
            </div>
            <div class="detail-row afterServiceRow" style="display: none">
              <span class="detail-label">After Service Charge</span>
              <span class="detail-value successAfterService"></span>
            </div>
            <div class="detail-row discountRow" style="display: none">
              <span class="detail-label">Discount <span class="discount-rate"></span></span>
              <span class="detail-value successDiscount"></span>
            </div>
            <div class="detail-row afterDiscountRow" style="display: none">
              <span class="detail-label">After Discount</span>
              <span class="detail-value successAfterDiscount"></span>
            </div>
            <div class="detail-row gstRow" style="display: none">
              <span class="detail-label">GST (<span class="gstRate"></span>)</span>
              <span class="detail-value successGST"></span>
            </div>
            <div class="detail-row originalAmountRow" style="display: none">
              <span class="detail-label">Total Amount (Unrounded)</span>
              <span class="detail-value successOriginalAmount"></span>
            </div>
            <div class="detail-row amount-row">
              <span class="detail-label">Total Amount</span>
              <span class="detail-value successAmount"></span>
            </div>
            <div class="detail-row receipt-footer-row">
              <div class="detail-row">
                <span class="detail-label">Date & Time</span>
                <span class="detail-value successDateTime"></span>
              </div>
              <p class="success-subtitle">Thank you and see you again!</p>
            </div>
          </div>
        </div>
      </div>
      <div class="group-members-container">
        <div class="favourite-group-section">
          <div class="favourite-group-title">Settle Members</div>
          <div id="groupMembers" class="group-members"></div>
          <div class="drag-instructions">Click your name to view the bill</div>
        </div>
      </div>
      <div class="success-footer footer-mobile">
        <div class="success-footer-text">
          <span class="success-footer-text-title">SettleLah</span>
          <div class="settings-footer">
            <p>
              App Version <span id="appVersion">1.0.0</span>. Copyright Â© <span class="copyrightYear">2025</span>
              <a href="https://www.joasisweb.com" target="_blank">Joasis Web</a>
            </p>
            <p>Developed with ðŸ’— by Joel Lee.</p>
          </div>
        </div>
      </div>
    </div>
    <div class="success-footer footer-desktop">
      <div class="success-footer-text">
        <span class="success-footer-text-title">SettleLah</span>
        <div class="settings-footer">
          <p>
            App Version <span id="appVersion">1.0.0</span>. Copyright Â© <span class="copyrightYear">2025</span>
            <a href="https://www.joasisweb.com" target="_blank">Joasis Web</a>.&nbsp;
          </p>
          <p>Developed with ðŸ’— by Joel Lee.</p>
        </div>
      </div>
    </div>

    <!-- Share Bill Modal -->
    <div id="memberbillOverlay" class="modal-overlay"></div>
    <div id="memberbillModal" class="member-bill-modal">
      <div class="modal-content member-bill-modal-content">
        <div class="modal-header">
          <h2>Settle Detail</h2>
          <button class="member-close-modal">&times;</button>
        </div>
        <div class="modal-body member-bill-modal-body">
          <!-- Modal content will be dynamically populated with JavaScript -->
        </div>
      </div>
    </div>

    <!-- Payment Confirmation Modal -->
    <div id="paymentConfirmOverlay" class="modal-overlay"></div>
    <div id="paymentConfirmModal" class="payment-confirm-modal">
      <div class="modal-content payment-confirm-modal-content">
        <div class="modal-header">
          <h2>Confirm Payment</h2>
          <button class="payment-confirm-close-modal">&times;</button>
        </div>
        <div class="modal-body payment-confirm-modal-body">
          <p>Are you sure you settle this already or not?</p>
          <div class="payment-confirm-buttons">
            <button id="confirmPaymentBtn" class="action-button primary-button">Yes, I Have Paid!</button>
            <button id="cancelPaymentBtn" class="action-button secondary-button">Cancel</button>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script type="text/javascript" src="/result.min.js"></script>
</html>
